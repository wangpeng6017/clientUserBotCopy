# Telegram Client User Bot

ä¸€ä¸ªåŸºäº Pyrogram çš„ Telegram å®¢æˆ·ç«¯æ¨¡æ‹Ÿæ“ä½œæœºå™¨äººï¼Œç”¨äºç›‘å¬æŒ‡å®šç”¨æˆ·ï¼ˆæœºå™¨äººæˆ–æ™®é€šç”¨æˆ·ï¼‰çš„æ¶ˆæ¯å¹¶é€šè¿‡å®¢æˆ·ç«¯æ¨¡æ‹Ÿæ“ä½œè‡ªåŠ¨å¤åˆ¶åˆ°å¯¹åº”ç¾¤ç»„ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ” ç›‘å¬æ‰€æœ‰ç¾¤ç»„ä¸­çš„æŒ‡å®šç”¨æˆ·æ¶ˆæ¯ï¼ˆæ”¯æŒæœºå™¨äººå’Œæ™®é€šç”¨æˆ·ï¼‰
- ğŸ“‹ **å®¢æˆ·ç«¯æ¨¡æ‹Ÿæ“ä½œ**ï¼šä½¿ç”¨ `copy_message` æ–¹æ³•æ¨¡æ‹Ÿç”¨æˆ·å¤åˆ¶æ¶ˆæ¯çš„æ“ä½œï¼ˆä¸å¸¦è½¬å‘æ ‡å¤´ï¼‰
- ğŸ–¼ï¸ æ”¯æŒæ–‡æœ¬å’Œåª’ä½“ï¼ˆå›¾ç‰‡ã€è§†é¢‘ç­‰ï¼‰æ¶ˆæ¯çš„å®Œæ•´å¤åˆ¶
- â° **æ™ºèƒ½è¿‡æ»¤å†å²æ¶ˆæ¯**ï¼šåªå¤„ç†å¯åŠ¨åçš„æ–°æ¶ˆæ¯ï¼Œé¿å…å¤„ç†å†å²æ¶ˆæ¯å¯¼è‡´é‡å¤å‘é€
- ğŸ“ å®Œæ•´çš„æ—¥å¿—è®°å½•åŠŸèƒ½
- ğŸ”„ **æ”¯æŒ systemd æœåŠ¡ç®¡ç†**ï¼šå¯å®‰è£…ä¸ºç³»ç»ŸæœåŠ¡ï¼Œå¼€æœºè‡ªå¯
- âš™ï¸ é…ç½®æ–‡ä»¶åŒ–ç®¡ç†
- ğŸ›¡ï¸ é˜²é£æ§æœºåˆ¶ï¼šæ¶ˆæ¯é˜Ÿåˆ— + éšæœºå»¶è¿Ÿ
- ğŸ”€ **å¤šè´¦æˆ·è´Ÿè½½å‡è¡¡**ï¼šæ”¯æŒé…ç½®å¤šç»„ api_id/api_hashï¼ŒåŒä¸€ä¸ªç¾¤çš„æ¶ˆæ¯æŒ‰è½®è¯¢æ–¹å¼åˆ†é…ç»™ä¸åŒè´¦æˆ·å‘é€

## ğŸ”„ ä¸åŸç‰ˆ tgUserBot çš„åŒºåˆ«

| ç‰¹æ€§ | tgUserBot | clientTgUserBot |
|------|-----------|-----------------|
| åº“ | Telethon | Pyrogram |
| å‘é€æ–¹å¼ | `send_message` (ç›´æ¥å‘é€) | `copy_message` (å®¢æˆ·ç«¯æ¨¡æ‹Ÿæ“ä½œ) |
| æ¶ˆæ¯æ ¼å¼ | é‡æ–°å‘é€æ–‡æœ¬/åª’ä½“ | å®Œæ•´å¤åˆ¶åŸå§‹æ¶ˆæ¯ï¼ˆæ ¼å¼ã€åª’ä½“ã€æ ·å¼ï¼‰ |
| è½¬å‘æ ‡å¤´ | æ—  | æ— ï¼ˆæ¨¡æ‹Ÿç”¨æˆ·å¤åˆ¶ç²˜è´´ï¼‰ |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Python 3.9+
- Telegram API ID å’Œ API Hash
- Linux æœåŠ¡å™¨ï¼ˆæ¨è Ubuntu 22.04ï¼‰

### å®‰è£…æ­¥éª¤

1. **è¿›å…¥é¡¹ç›®ç›®å½•**
   ```bash
   cd clientTgUserBot
   ```

2. **åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ**
   ```bash
   python3 -m venv client_env
   source client_env/bin/activate
   pip install --upgrade pip
   ```

3. **å®‰è£…ä¾èµ–**
   ```bash
   pip install -r requirements.txt
   ```

4. **é…ç½®é¡¹ç›®**
   ```bash
   cp config.json.example config.json
   nano config.json  # ç¼–è¾‘é…ç½®æ–‡ä»¶
   ```

5. **é¦–æ¬¡ç™»å½•**
   ```bash
   python main.py  # ç™»å½•å Ctrl+C é€€å‡º
   ```

6. **è¿è¡Œç¨‹åº**
   ```bash
   python main.py
   ```

## âš™ï¸ é…ç½®è¯´æ˜

é…ç½®æ–‡ä»¶ï¼š`config.json`

### å¤šè´¦æˆ·é…ç½®ï¼ˆæ¨èï¼‰

```json
{
    "accounts": [
        {
            "api_id": 12345678,
            "api_hash": "your_api_hash_here_1",
            "name": "account1"
        },
        {
            "api_id": 87654321,
            "api_hash": "your_api_hash_here_2",
            "name": "account2"
        }
    ],
    "target_bot_username": "your_bot_username",
    "log_dir": "logs",
    "send_interval": 2.0,
    "send_jitter": 1.0,
    "log_level": "INFO",
    "distribution_strategy": "round_robin"
}
```

### å•è´¦æˆ·é…ç½®ï¼ˆå…¼å®¹æ—§æ ¼å¼ï¼‰

```json
{
    "api_id": 12345678,
    "api_hash": "your_api_hash_here",
    "target_bot_username": "your_bot_username",
    "log_dir": "logs",
    "send_interval": 2.0,
    "send_jitter": 1.0,
    "log_level": "INFO"
}
```

### é…ç½®é¡¹è¯´æ˜

- `accounts`: è´¦æˆ·åˆ—è¡¨ï¼ˆæ•°ç»„ï¼‰ï¼Œæ¯ä¸ªè´¦æˆ·åŒ…å«ï¼š
  - `api_id`: Telegram API IDï¼ˆä» https://my.telegram.org/apps è·å–ï¼‰
  - `api_hash`: Telegram API Hash
  - `name`: è´¦æˆ·åç§°ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨ `account_{api_id}`ï¼‰
- `target_bot_username`: è¦ç›‘å¬çš„ç”¨æˆ·åï¼ˆå¯ä»¥æ˜¯æœºå™¨äººæˆ–æ™®é€šç”¨æˆ·ï¼Œä¸å¸¦ @ï¼‰
- `log_dir`: æ—¥å¿—ç›®å½•ï¼ˆç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ï¼Œé»˜è®¤ "logs"ï¼‰
- `send_interval`: æ¶ˆæ¯å‘é€é—´éš”ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 2.0 ç§’
- `send_jitter`: éšæœºæŠ–åŠ¨æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 1.0 ç§’ï¼Œä¼šåœ¨ 0 åˆ° send_jitter ä¹‹é—´éšæœº
- `log_level`: æ—¥å¿—çº§åˆ«ï¼ˆDEBUG, INFO, WARNING, ERRORï¼‰ï¼Œé»˜è®¤ INFO
- `distribution_strategy`: æ¶ˆæ¯åˆ†é…ç­–ç•¥ï¼Œå¯é€‰å€¼ï¼š
  - `round_robin`: è½®è¯¢åˆ†é…ï¼ˆé»˜è®¤ï¼‰ï¼ŒåŒä¸€ä¸ªç¾¤çš„æ¶ˆæ¯æŒ‰é¡ºåºåˆ†é…ç»™ä¸åŒè´¦æˆ·
  - `random`: éšæœºåˆ†é…ï¼Œéšæœºé€‰æ‹©ä¸€ä¸ªè´¦æˆ·å‘é€

### å¤šè´¦æˆ·å·¥ä½œåŸç†

- **æ‰€æœ‰è´¦æˆ·éƒ½ç›‘å¬æ¶ˆæ¯**ï¼šæ¯ä¸ªé…ç½®çš„è´¦æˆ·éƒ½ä¼šç›‘å¬æ‰€æœ‰ç¾¤ç»„ä¸­çš„ç›®æ ‡ç”¨æˆ·æ¶ˆæ¯
- **æ¶ˆæ¯åˆ†é…ç­–ç•¥**ï¼š
  - `round_robin`ï¼ˆè½®è¯¢ï¼‰ï¼šåŒä¸€ä¸ªç¾¤çš„æ¶ˆæ¯ä¼šæŒ‰é¡ºåºåˆ†é…ç»™ä¸åŒçš„è´¦æˆ·å‘é€ï¼Œä¾‹å¦‚ç¾¤Açš„ç¬¬1æ¡æ¶ˆæ¯ç”¨è´¦æˆ·1ï¼Œç¬¬2æ¡ç”¨è´¦æˆ·2ï¼Œç¬¬3æ¡ç”¨è´¦æˆ·1ï¼Œä»¥æ­¤ç±»æ¨
  - `random`ï¼ˆéšæœºï¼‰ï¼šæ¯æ¬¡éšæœºé€‰æ‹©ä¸€ä¸ªè´¦æˆ·å‘é€
- **è´Ÿè½½å‡è¡¡**ï¼šé€šè¿‡å¤šè´¦æˆ·åˆ†é…ï¼Œå¯ä»¥æœ‰æ•ˆåˆ†æ•£å‘é€å‹åŠ›ï¼Œé™ä½è¢«é£æ§çš„é£é™©

## ğŸ“– ä½¿ç”¨æ–¹æ³•

### ç›´æ¥è¿è¡Œ

```bash
source client_env/bin/activate
python main.py
```

### å®‰è£…ä¸ºç³»ç»ŸæœåŠ¡ï¼ˆæ¨èï¼‰

**é¦–æ¬¡ä½¿ç”¨å‰ï¼Œè¯·å…ˆæ‰‹åŠ¨è¿è¡Œä¸€æ¬¡å®Œæˆæ‰€æœ‰è´¦æˆ·çš„ç™»å½•**ï¼š

```bash
# 1. æ‰‹åŠ¨è¿è¡Œå®Œæˆç™»å½•
source client_env/bin/activate
python main.py
# ä¸ºæ¯ä¸ªè´¦æˆ·è¾“å…¥ç”µè¯å·ç ã€éªŒè¯ç å’Œå¯†ç ï¼ˆå¦‚éœ€è¦ï¼‰
# ç™»å½•å®ŒæˆåæŒ‰ Ctrl+C é€€å‡º

# 2. å®‰è£…æœåŠ¡
chmod +x install_service.sh
./install_service.sh

# 3. å¯åŠ¨æœåŠ¡
sudo systemctl start clienttguserbot

# 4. æŸ¥çœ‹æœåŠ¡çŠ¶æ€
sudo systemctl status clienttguserbot
```

**æœåŠ¡ç®¡ç†å‘½ä»¤**ï¼š
```bash
# å¯åŠ¨æœåŠ¡
sudo systemctl start clienttguserbot

# åœæ­¢æœåŠ¡
sudo systemctl stop clienttguserbot

# é‡å¯æœåŠ¡
sudo systemctl restart clienttguserbot

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status clienttguserbot

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u clienttguserbot -f
```

è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ [Systemd æœåŠ¡å®‰è£…æŒ‡å—](README_SYSTEMD.md)

### æŸ¥çœ‹æ—¥å¿—

```bash
# Systemd æ—¥å¿—ï¼ˆå¦‚æœä½¿ç”¨æœåŠ¡ï¼‰
sudo journalctl -u clienttguserbot -f

# åº”ç”¨æ—¥å¿—æ–‡ä»¶
tail -f logs/client_tguserbot_*.log
```

## ğŸ”§ æŠ€æœ¯å®ç°

### å®¢æˆ·ç«¯æ¨¡æ‹Ÿæ“ä½œ

æœ¬é¡¹ç›®ä½¿ç”¨ Pyrogram çš„ `copy_message` æ–¹æ³•æ¥å®ç°å®¢æˆ·ç«¯æ¨¡æ‹Ÿæ“ä½œï¼š

```python
copied_message = await app.copy_message(
    chat_id=target_chat_id,
    from_chat_id=source_chat_id,
    message_id=message_id
)
```

**ä¼˜åŠ¿ï¼š**
- å®Œæ•´ä¿ç•™åŸå§‹æ¶ˆæ¯çš„æ ¼å¼ã€æ ·å¼å’Œåª’ä½“
- ä¸æ˜¾ç¤º"è½¬å‘è‡ª"æ ‡å¤´ï¼Œæ›´åƒæ˜¯ç”¨æˆ·æ‰‹åŠ¨å¤åˆ¶ç²˜è´´
- æ”¯æŒåª’ä½“ç»„ã€ç›¸å†Œç­‰å¤æ‚æ¶ˆæ¯ç±»å‹
- æ›´æ¥è¿‘çœŸå®ç”¨æˆ·æ“ä½œï¼Œé™ä½è¢«æ£€æµ‹é£é™©

**ä¸ `send_message` çš„åŒºåˆ«ï¼š**
- `send_message`: éœ€è¦æ‰‹åŠ¨æå–æ–‡æœ¬å’Œåª’ä½“ï¼Œé‡æ–°å‘é€
- `copy_message`: ç›´æ¥å¤åˆ¶æ•´ä¸ªæ¶ˆæ¯ï¼Œä¿ç•™æ‰€æœ‰åŸå§‹å±æ€§

## ğŸ“ é¡¹ç›®ç»“æ„

```
clientTgUserBot/
â”œâ”€â”€ main.py                 # ä¸»ç¨‹åº
â”œâ”€â”€ config.json             # é…ç½®æ–‡ä»¶ï¼ˆéœ€è¦åˆ›å»ºï¼‰
â”œâ”€â”€ config.json.example     # é…ç½®æ¨¡æ¿
â”œâ”€â”€ requirements.txt        # Python ä¾èµ–
â”œâ”€â”€ clienttguserbot.service # Systemd æœåŠ¡æ–‡ä»¶
â”œâ”€â”€ install_service.sh     # æœåŠ¡å®‰è£…è„šæœ¬
â”œâ”€â”€ README.md              # æœ¬æ–‡ä»¶
â”œâ”€â”€ README_SYSTEMD.md      # Systemd æœåŠ¡å®‰è£…æŒ‡å—
â””â”€â”€ logs/                  # æ—¥å¿—ç›®å½•ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
```

## ğŸ”’ å®‰å…¨å»ºè®®

1. **ä¿æŠ¤æ•æ„Ÿæ–‡ä»¶**
   ```bash
   chmod 600 config.json
   chmod 600 *.session
   ```

2. **ä¸è¦æäº¤æ•æ„Ÿä¿¡æ¯**
   - `config.json` åº”æ·»åŠ åˆ° `.gitignore`
   - `*.session` æ–‡ä»¶åº”æ·»åŠ åˆ° `.gitignore`

3. **å®šæœŸæ›´æ–°ä¾èµ–**
   ```bash
   source client_env/bin/activate
   pip install --upgrade pyrogram tgcrypto
   ```

## ğŸ› æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

1. **å¯¼å…¥é”™è¯¯ï¼šæ‰¾ä¸åˆ° pyrogram**
   ```bash
   source client_env/bin/activate
   pip install -r requirements.txt
   ```

2. **ç™»å½•å¤±è´¥**
   - æ£€æŸ¥ `api_id` å’Œ `api_hash` æ˜¯å¦æ­£ç¡®
   - ç¡®ä¿ç½‘ç»œè¿æ¥æ­£å¸¸
   - å¦‚æœå¯ç”¨äº†ä¸¤æ­¥éªŒè¯ï¼Œéœ€è¦åœ¨äº¤äº’å¼ç¯å¢ƒä¸­é¦–æ¬¡ç™»å½•

3. **æ¶ˆæ¯å¤åˆ¶å¤±è´¥**
   - æ£€æŸ¥æ˜¯å¦æœ‰æƒé™è®¿é—®æºæ¶ˆæ¯å’Œç›®æ ‡ç¾¤ç»„
   - æŸäº›å—ä¿æŠ¤çš„æ¶ˆæ¯å¯èƒ½æ— æ³•å¤åˆ¶
   - æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶äº†è§£è¯¦ç»†é”™è¯¯ä¿¡æ¯

4. **æ€§èƒ½é—®é¢˜**
   - è°ƒæ•´ `send_interval` å’Œ `send_jitter` å‚æ•°
   - æ£€æŸ¥ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0
- åˆå§‹ç‰ˆæœ¬
- åŸºäº Pyrogram å®ç°å®¢æˆ·ç«¯æ¨¡æ‹Ÿæ“ä½œ
- æ”¯æŒæ¶ˆæ¯é˜Ÿåˆ—å’Œé˜²é£æ§æœºåˆ¶
- å®Œæ•´çš„æ—¥å¿—è®°å½•åŠŸèƒ½

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œä¸ªäººä½¿ç”¨ã€‚

## ğŸ”— ç›¸å…³é“¾æ¥

- [Pyrogram æ–‡æ¡£](https://docs.pyrogram.org/)
- [Telegram API](https://core.telegram.org/api)
- [è·å– API å‡­è¯](https://my.telegram.org/apps)

---

**éœ€è¦å¸®åŠ©ï¼Ÿ** è¯·æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶æˆ–æäº¤ Issueã€‚

